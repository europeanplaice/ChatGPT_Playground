(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{47432:function(e,n,t){Promise.resolve().then(t.bind(t,4874))},4874:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return C}});var a=t(9268),i=t(86006),r=t(24214),l=t(57807),s=t(81771),o=t(23607),c=t(47931),u=t(14864),d=t(4310),x=t(2525),g=t(51710),m=t(95383),h=t(43370),p=t(14240),f=t(44532),j=t(19205),y=t(37595),Z=t(32548),k=t(85712),O=t(27361);let v=async(e,n)=>{try{let t=await (0,r.Z)(e,n);return t.data}catch(e){throw e}},z=e=>{let n=e.split("\n");return n.map((e,n)=>(0,a.jsxs)(i.Fragment,{children:[e,(0,a.jsx)("br",{})]},n))};async function E(e,n,t,a,i){let r=[...e,...n];r.sort((e,n)=>e.id-n.id);let l=await v("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:"Bearer ".concat(a.apikey),"OpenAI-Organization":"".concat(a.Organization),"Content-Type":"application/json"},data:{model:"gpt-3.5-turbo",messages:r.map(e=>{let{id:n,...t}=e;return t})}});t(e=>[...e,{id:i,role:"assistant",content:l.choices[0].message.content}])}function S(e,n){if(0===e.length&&0===n.length)return 1;let t=[...e,...n],a=Math.max(...t.map(e=>e.id));return a+1}async function b(e,n){try{await v("https://api.openai.com/v1/models",{method:"GET",headers:{Authorization:"Bearer ".concat(n.apikey),"OpenAI-Organization":"".concat(n.Organization)}}),e(!0)}catch(n){e(!1)}}function w(e,n,t,a,i,r){i(i=>{if(null===t)return[...i,{id:S(e,n),role:"user",content:a}];{let e=i.findIndex(e=>e.id===t),n=[...i];return n[e].content=a,n}}),null!==t&&r(e=>{e.pop();let n=[...e];return n})}function C(){let[e,n]=(0,i.useState)([]),[t,r]=(0,i.useState)([]),[v,C]=(0,i.useState)([]),[I,R]=(0,i.useState)(""),[T,P]=(0,i.useState)(!1),[A,B]=(0,i.useState)(null),[_,D]=(0,i.useState)(null),[N,K]=(0,i.useState)(null),[L,W]=(0,i.useState)({Organization:"",apikey:""}),F=(0,i.useRef)(null),M=(0,i.useRef)(null);(0,i.useEffect)(()=>{n(()=>{let e=[...t,...v];return e.sort((e,n)=>e.id-n.id),e})},[t,v]);let G=async()=>{P(!0),B(null);try{await E(t,v,C,L,S(t,v))}catch(e){B(e.message),r(e=>{e.pop();let n=[...e];return n})}finally{P(!1),R(""),D(null)}};return(0,i.useEffect)(()=>{t.length>0&&G()},[t]),(0,i.useEffect)(()=>{W(()=>({apikey:localStorage.getItem("apikey"),Organization:localStorage.getItem("Organization")}))},[]),(0,i.useEffect)(()=>{b(K,L)},[L]),(0,i.useEffect)(()=>{null!==_&&""!==I&&(M.current.scrollIntoView(!1),F.current.focus())},[_,I]),(0,i.useEffect)(()=>{""!==L.apikey&&localStorage.setItem("apikey",L.apikey)},[L.apikey]),(0,i.useEffect)(()=>{""!==L.Organization&&localStorage.setItem("Organization",L.Organization)},[L.Organization]),(0,a.jsxs)(l.Z,{maxWidth:"md",children:[(0,a.jsx)("h1",{children:"ChatGPT Playground"}),(0,a.jsxs)(x.Z,{sx:{marginBottom:"1em",maxWidth:"60%"},elevation:2,children:[(0,a.jsxs)(g.Z,{expandIcon:(0,a.jsx)(h.Z,{}),children:[(0,a.jsx)("span",{style:{marginLeft:"4px",marginRight:"2em",fontWeight:700},children:"API Config"})," ",N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Z,{color:"success",sx:{marginRight:"4px"}}),"Logged in!"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.Z,{color:"error",sx:{marginRight:"4px"}}),"Not logged in."]})]}),(0,a.jsxs)(m.Z,{children:[(0,a.jsx)(o.Z,{label:"Organization ID",type:"text",sx:{marginRight:"4px",marginBottom:"8px"},value:L.Organization,onChange:e=>{W(n=>({...n,Organization:e.target.value}))}}),(0,a.jsx)(o.Z,{label:"API KEY",type:"password",sx:{marginBottom:"8px"},value:L.apikey,onChange:e=>W(n=>({...n,apikey:e.target.value}))}),(0,a.jsx)(s.Z,{})]})]}),A&&(0,a.jsx)(d.Z,{severity:"error",children:A}),(0,a.jsxs)(s.Z,{sx:{margin:"1em"},children:[e.map((e,n)=>{var i,r,l,o,u,d;return(0,a.jsxs)(s.Z,{children:[(0,a.jsx)("h2",{children:e.role}),(0,a.jsxs)(s.Z,{sx:{display:"flex"},children:[(0,a.jsx)(s.Z,{sx:{flex:1},children:"user"===e.role?z(e.content):(0,a.jsx)(Z.D,{children:e.content,components:{code(e){let{node:n,inline:t,className:i,children:r,...l}=e,s=/language-(\w+)/.exec(i||"");return!t&&s?(0,a.jsx)(k.Z,{...l,children:String(r).replace(/\n$/,""),style:O.Z,language:s[1],PreTag:"div"}):(0,a.jsx)("code",{...l,className:i,children:r})}}})}),e.id===Math.max(...t.map(e=>e.id))?(i=e,r=_,l=D,o=R,u=T,d=r?(0,a.jsx)(c.Z,{color:"error",sx:{marginLeft:"1em",marginTop:"auto"},variant:"contained",onClick:()=>{l(null),o("")},disabled:u,children:"Cancel"}):(0,a.jsx)(c.Z,{color:"secondary",sx:{marginLeft:"1em",marginTop:"auto"},onClick:()=>{l(i.id),o(i.content)},variant:"contained",disabled:u,children:"Edit"}),(0,a.jsx)(s.Z,{sx:{display:"flex",flexDirection:"column"},children:d})):(0,a.jsx)(s.Z,{})]}),(0,a.jsx)("hr",{})]},n)}),T?(0,a.jsx)(u.Z,{color:"secondary"}):""]}),(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(p.Z,{sx:{marginBottom:"1.5em",marginTop:"2em"},children:_?(0,a.jsx)(y.Z,{label:"Edit Mode"}):""}),(0,a.jsx)(o.Z,{id:"outlined-multiline-flexible",inputRef:F,label:"message",multiline:!0,maxRows:1e3,fullWidth:!0,value:I,onChange:e=>R(e.target.value),disabled:T,onKeyDown:e=>{"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&w(t,v,_,I,r,C)}}),(0,a.jsx)(s.Z,{flexDirection:"row",justifyContent:"flex-end",display:"flex",children:(0,a.jsx)(c.Z,{sx:{margin:"1em"},onClick:()=>w(t,v,_,I,r,C),variant:"contained",disabled:T,children:T?"sending...":"send"})})]}),(0,a.jsx)(s.Z,{ref:M})]})}}},function(e){e.O(0,[287,667,488,744],function(){return e(e.s=47432)}),_N_E=e.O()}]);